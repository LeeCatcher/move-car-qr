<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>挪车服务</title>
    <style>
        body {
            font-family: Arial, sans-serif;
            text-align: center;
            padding: 50px;
        }
        .number {
            font-size: 2em;
            color: #007bff;
            margin: 20px 0;
        }
        .expired {
            color: red;
        }
    </style>
</head>
<body>
    <h1>挪车服务</h1>
    <div id="content">
        <p>扫描二维码获取车主虚拟号码</p>
    </div>

    <script>
        function getQueryVariable(variable) {
            var query = window.location.search.substring(1);
            var vars = query.split("&");
            for (var i = 0; i < vars.length; i++) {
                var pair = vars[i].split("=");
                if (pair[0] == variable) {
                    return pair[1];
                }
            }
            return null;
        }

        var virtualNumber = getQueryVariable('vn');
        var expireDateStr = getQueryVariable('expire');

        if (virtualNumber && expireDateStr) {
            var expireDate = new Date(expireDateStr);
            var currentDate = new Date();

            if (currentDate <= expireDate) {
                // 在有效期内
                document.getElementById('content').innerHTML = 
                    '<p>请拨打以下虚拟号码联系车主：</p>' +
                    '<div class="number">' + virtualNumber + '</div>' +
                    '<p>（有效期至：' + expireDate.toLocaleDateString() + '）</p>';
            } else {
                document.getElementById('content').innerHTML = 
                    '<p class="expired">抱歉，该二维码已过期。</p>';
            }
        } else {
            document.getElementById('content').innerHTML = 
                '<p>参数错误，无法获取虚拟号码。</p>';
        }
    </script>
</body>
</html>